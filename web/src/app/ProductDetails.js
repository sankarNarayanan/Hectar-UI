export const PRODUCT_DETAILS = [
  {
    name: "Red Dry Chillis",
    variants: [
      {
        name: "Sannam 334",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST40",
        loadingPort: "Chennai (ex Madras)",
        description: [
          { name: "Best" },
          { name: "Medium Best" },
          { name: "Deluxe" },
        ],
      },
      {
        name: "Teja S17",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST40",
        loadingPort: "Chennai (ex Madras)",
        description: [
          { name: "Best" },
          { name: "Medium Best" },
          { name: "Deluxe" },
        ],
      },
      {
        name: "Byadgi Chilli",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST40",
        loadingPort: "Mangalore",
        description: [{ name: "Kaddi" }, { name: "Dabbi" }, { name: "Deluxe" }],
      },
      {
        name: "Ramnad Mundu chilli",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST40",
        loadingPort: "Tuticorin",
        description: [{ name: "Ist grade" }, { name: "IInd grade" }],
      },
    ],
  },
  {
    name: "Turmeric",
    variants: [
      {
        name: "Erode Turmeric",
        typicalLoadability: "17 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Chennai (ex Madras)",
        description: [{ name: "Sannam" }, { name: "Bold" }],
      },
      {
        name: "Nizamabad Turmeric",
        typicalLoadability: "17 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Chennai (ex Madras)",
        description: [{ name: "Sannam" }, { name: "Bold" }],
      },
      {
        name: "Sangli Turmeric / Rajpuri Turmeric",
        typicalLoadability: "17 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Mumbai (ex Bombay)",
        description: [{ name: "Sannam" }, { name: "Bold" }],
      },
      {
        name: "Allepey Turmeric",
        typicalLoadability: "17 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Chennai (ex Madras)",
        description: [{ name: "Whole Turmeric finger" }],
      },
    ],
  },
  {
    name: "Coriander",
    variants: [
      {
        name: "Single parrot",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "Green colour" }],
      },
      {
        name: "Double parrot",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "Green colour" }],
      },
      {
        name: "Eagle",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "Medium green colour" }],
      },
      {
        name: "Scooter",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "Medium green colour" }],
      },
      {
        name: "Badami",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "Brown colour" }],
      },
    ],
  },
  {
    name: "Cumin ",
    variants: [
      {
        name: "European Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 101 - 99.5 % Purity" },
          { name: "CRE 102 - 99% Purity" },
          { name: "CRE 103 - 98% Purity" },
        ],
      },
      {
        name: "Gulf Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 104 - 99% Purity" },
          { name: "CRE 105 - 98% Purity" },
        ],
      },
      {
        name: "Singapore Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 106 - 99% Purity" },
          { name: "CRE 107 - 98% Purity" },
        ],
      },
    ],
  },
  {
    name: "Fennel",
    variants: [
      {
        name: "USA Quality Fennel",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "99.5" }, { name: "99%" }],
      },
      {
        name: "European Quality Fennel",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "99.5%" }, { name: "99% " }, { name: "98%" }],
      },
      {
        name: "Gulf Quality Fennel",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "99%" }, { name: "98" }, { name: "97" }],
      },
      {
        name: "Singapore quality Fennel",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [{ name: "99%" }, { name: "98%" }, { name: "97%" }],
      },
    ],
  },
  {
    name: "Dried Ginger",
    variants: [
      {
        name: "Calicut Quality Dried Ginger",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [
          { name: "Non-Bleached Garbled Calicut Dried Ginger(NGK)" },
          { name: "Non-Bleached Un-Garbled Calicut Dried Ginger(NUGK)" },
        ],
      },
      {
        name: "Cochin Quality Dried Ginger ",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [
          { name: "Non-Bleached Garbled Cochin Dried Ginger(NGC)" },
          { name: "Non-Bleached Un-Garbled Cochin Dried Ginger(NUGC)" },
        ],
      },
    ],
  },
  {
    name: "Green Cardamon",
    variants: [
      {
        name: "AGEb (Alleppey Green Extra Bold Cardamon) ",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [{ name: ">=7.0 mm" }],
      },
      {
        name: "AGB (Alleppey Green Bold)",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [{ name: ">=6.0" }],
      },
      {
        name: "AGB (Alleppey Green Superior)",
        typicalLoadability: "10 MT",
        typicalLoadabilityValue: 17,
        containerType: "ST20",
        loadingPort: "Kochi",
        DEscription: [
          { name: "superior (AGS)-     >=5.0 mm" },
          { name: "superior 1 (AGS 1)- >=4.0 mm" },
          { name: "superior 2 (AGS 2)- >=4.0 mm" },
        ],
      },
    ],
  },
  {
    name: "Black Pepper",
    variants: [
      {
        name: "Tellicherry Black pepper",
        typicalLoadability: "13 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [
          { name: "TGSEB: Tellicherry garbled Special Extra Bold" },
          { name: "TGEB:Tellicherry Garbled Extra Bold" },
          { name: "TGEB : Tellicherry Garbled" },
        ],
      },
      {
        name: "Malabar Black Pepper",
        typicalLoadability: "13 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [
          { name: "MG-1 and MG-2: Malabar Garbled 1 and Malabar Garbled 2" },
          {
            name: "MUG-1 and MUG-2: Malabar Un-Garbled 1 and Malabar Un-Garbled 2",
          },
          {
            name: "MUG-3L and MUG-4L: Malabar Un-Garbled 3L and Malabar Un-Garbled 4L",
          },
        ],
      },
      {
        name: "Pinhead -1mm Black Pepper",
        typicalLoadability: "13 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [{ name: "Size :1mm" }],
      },
      {
        name: "Pinhead 1mm-1.5mm Black Pepper",
        typicalLoadability: "13 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [{ name: "Size:1-1.5mm" }],
      },
      {
        name: "Pinhead 1.5-2mm Black Pepper",
        typicalLoadability: "13 MT",
        typicalLoadabilityValue: 10,
        containerType: "ST20",
        loadingPort: "Kochi",
        description: [{ name: "Size 1.5-2mm" }],
      },
    ],
  },
  {
    name: "Cumin ",
    variants: [
      {
        name: "European Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 101 - 99.5 % Purity" },
          { name: "CRE 102 - 99% Purity" },
          { name: "CRE 103 - 98% Purity" },
        ],
      },
      {
        name: "Gulf Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 104 - 99% Purity" },
          { name: "CRE 105 - 98% Purity" },
        ],
      },
      {
        name: "Singapore Quality cumin",
        typicalLoadability: "14 MT",
        typicalLoadabilityValue: 14,
        containerType: "ST20",
        loadingPort: "Mundra",
        description: [
          { name: "CRE 106 - 99% Purity" },
          { name: "CRE 107 - 98% Purity" },
        ],
      },
    ],
  },
];

import { PORTS } from "@/utils/attributed_ports.js";

class ProductDetails {
  constructor() {
    this.products = PRODUCT_DETAILS;

    this.unLoadingPorts = [
      { label: "Malasiya", value: "Malasiya" },
      { label: "Colombo, Srilanka", value: "Colombo, Srilanka" },
      { label: "Singapore", value: "Singapore" },
      { label: "Malasiya", value: "Malasiya" },
      { label: "Colombo, Srilanka", value: "Colombo, Srilanka" },
      { label: "Singapore", value: "Singapore" },
    ];
  }

  /**
   * Extract the product details from the base object and
   * format it to feed the Select input as options
   */
  get productItems() {
    return this.products.map((item) => ({
      value: item.name,
      label: item.name,
    }));
  }

  /**
   * Method that parses the stringified json and returns the
   * value from the object
   * @param {string} item
   * @returns {string}
   */
  getValuefromItem(item) {
    return item && JSON.parse(item).value;
  }

  /**
   * Get the selected Variant Details from the product name
   * @param {string} product - product item
   * @returns {object} - selected variant details
   */
  getVariantItems(product) {
    const selectedProduct = this.getProductDetails(product);
    // return Empty if nothing is selected or not matched with product
    if (!selectedProduct) {
      return [];
    }
    // return select options acceptable format data
    return selectedProduct.variants.map((variant) => ({
      label: variant.name,
      value: variant.name,
    }));
  }

  /**
   * Get the Variant details from product name and variant name
   * @param {string} product
   * @param {string} variant
   * @returns {object} - Variant Details
   */
  getVariantDetails(product, variant) {
    // the variant item is stringified JSON
    // need to parse it before using it can be undefined
    variant = this.getValuefromItem(variant);
    // get the selected product first
    const selectedProduct = this.getProductDetails(product);
    // find the variant with the variant name
    return (
      selectedProduct &&
      selectedProduct.variants.find((item) => item.name === variant)
    );
  }

  /**
   * get teh Product details with the items selected
   * @param {string} product - stringified product
   * @returns {object} - selected productdetails
   */
  getProductDetails(product) {
    // the product item is stringified JSON
    // need to parse it before using it can be undefined
    product = product && JSON.parse(product);
    // Find the variants respective to the selected product
    return this.products.find((item) => item.name === product?.value);
  }

  /**
   * To get the list of POrts in a format
   * that can be provided to select input
   * @returns {object} - list of label and value object
   */
  getPortItems() {
    return PORTS.features.map((item) => ({
      label: item.properties.Name + ", " + item.properties.Country,
      value: item.properties.Name,
    }));
  }

  /**
   * to find the details of teh POrt by the name of it
   * @param {String} name 
   * @returns 
   */
  findPortByName(name) {
    return PORTS.features.find((item) => item.properties.Name === name);
  }

  /**
   * to find the details of teh POrt by the coordinates of it
   * @param {String} name 
   * @returns 
   */
  findPortByCoordinates(coordinates) {
    return PORTS.features.find((item) => JSON.stringify(item.geometry.coordinates) === coordinates);
  }
}

export const productDetails = new ProductDetails();
